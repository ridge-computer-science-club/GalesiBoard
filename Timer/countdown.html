<!DOCTYPE html>
<html>
    <head>
            <link rel="stylesheet" type="text/css" href="countdown.css">
    </head>
    <body>
        <header> 
                <a href="timer.html">Go to Stopwatch</a>
        </header>
        <button onclick="getTime()">Insert time</button>
        <h1 id="stopWatch">00 : 00 . 000</h1>
        <button id="reset">Reset</button>
        <script>

            function getTime()
            {
                var x;
                var y;
                var time=prompt("Please enter the time You wish to start at","00:00.000");
                if (time!=null)
                {
                    x=(parseInt(time.substring(0,2), 10) * 60000) + (parseInt(time.substring(3,5),10) * 1000) + (parseInt(time.substring(6), 10));
                    function timeFormatter(timeInMilliseconds)
                    {
                        var time = new Date(timeInMilliseconds);
                        var minutes = time.getMinutes().toString();
                        var seconds = time.getSeconds().toString();
                        var milliseconds = time.getMilliseconds().toString();
                        if(time>0)
                        {
                            if(minutes.length <2) {
                                minutes = "0" + minutes;
                            }
                            if(seconds.length <2) {
                                seconds = "0" + seconds;
                            }
                            while(milliseconds.length <3) {
                                milliseconds = "0" + milliseconds;
                            }
                            return minutes + " : " + seconds + " . " + milliseconds;
                        }
                        else
                        {
                            document.getElementById("stopWatch").innerHTML= "please enter in the correct format";
                        }
                    }
                    var resetBtn = document.getElementById("reset");
                    var timer = setInterval(function go()
                    {
                    if(x>0)
                    {
                        y = timeFormatter(x);
                        document.getElementById("stopWatch").innerHTML=y;
                        resetBtn.addEventListener("click", function () {
                        document.getElementById("stopWatch").innerHTML= "00 : 00 . 000";
                        clearInterval(timer);
                        })
                        x = x-4;
                        y = timeFormatter(x);
                        document.getElementById("stopWatch").innerHTML=y;
                    }
                    else
                    {
                        clearInterval(timer);
                        document.getElementById("stopWatch").innerHTML= "time's up";
                    }
                    }, 1);
                }
                start(x);
                document.getElementById("stopWatch").innerHTML="Time's Up!";
            }
        </script>
    </body>
</html>